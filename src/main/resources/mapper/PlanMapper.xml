<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.szy.mapper.PlanMapper">

    <resultMap id="planMap" type="Plan">
        <id property="id" column="id" />
        <result property="grade" column="grade" />
        <result property="species" column="species" />
        <result property="amountStudent" column="amount_student" />
        <result property="amountMajor" column="amount_major" />
        <result property="status" column="status" />
    </resultMap>

    <resultMap id="majorMap" type="Major">
        <id property="majorId" column="major_id" />
        <result property="majorName" column="major_name" />
        <result property="classPlanNumber" column="class_plan_number" />
        <result property="stuPlanNumber" column="stu_plan_number" />
    </resultMap>

    <insert id="insertPlan" parameterType="Plan">
        INSERT INTO tb_plan(grade, species, amount_student, amount_major, status)
        VALUES (#{grade}, #{species}, #{amountStudent}, #{amountMajor}, #{status})
    </insert>

    <select id="findPlansAll" resultMap="planMap">
        SELECT * FROM tb_plan
    </select>

    <update id="updateStatus">
        UPDATE tb_plan
        SET status = #{0}
        WHERE id = #{1}
    </update>

    <insert id="insertMajor" parameterType="Major">
        INSERT INTO tb_major(major_id, major_name, class_plan_number, stu_plan_number)
        VALUES (#{majorId}, #{majorName}, #{classPlanNumber}, #{stuPlanNumber})
    </insert>

    <select id="findMajorsAll" resultMap="majorMap">
        SELECT * FROM tb_major
    </select>

</mapper>